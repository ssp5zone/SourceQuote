!function(e,t){"function"==typeof define&&define.amd?define(t):e.AnimatedModal=t()}(this,function(){"use strict";function e(){var e,t=document.createElement("fakeelement"),o={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in o)if(void 0!==t.style[e])return o[e]}function t(e,t){var o=e.style,n,s;if(t=t.charAt(0).toUpperCase()+t.slice(1),void 0!==o[t])return t;for(s=0;s<l.length;s++)if(n=l[s]+t,void 0!==o[n])return n}function o(e,o){for(var n in o)o.hasOwnProperty(n)&&(e.style[t(e,n)||n]=o[n]);return e}function n(e,t){return e.classList?e.classList.add(t):e.className+=" "+t,e}function s(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function a(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)void 0===e[n]&&(e[n]=o[n])}return e}function i(e){var t=this;t.opts=a(e||{},i.defaults,d),t.modal="object"==typeof t.opts.modalTarget?t.opts.modalTarget:document.getElementById(t.opts.modalTarget),t.isOpen=!1,t.opts.closeBtn&&t.modal.querySelector(t.opts.closeBtn).addEventListener("click",t.close.bind(t))}var l="webkit Moz ms O".split(" "),r=e(),d={animatedIn:"zoomIn",animatedOut:"zoomOut",closeBtn:".close-modal",modalBaseClass:"animated-modal",modalTarget:"animated-modal",escClose:null,afterClose:null,afterOpen:null,beforeClose:null,beforeOpen:null};return i.defaults={},i.prototype.open=function(){var e=this;if(!e.isOpen)return o(document.documentElement,{overflow:"hidden"}),o(document.body,{overflow:"hidden"}),s(e.modal,e.opts.animatedOut),n(e.modal,e.opts.modalBaseClass+"-on"),n(e.modal,this.opts.animatedIn),"function"==typeof e.opts.beforeOpen&&e.opts.beforeOpen(),r?e.modal.addEventListener(r,function t(){"function"==typeof e.opts.afterOpen&&e.opts.afterOpen(),e.modal.removeEventListener(r,t),e.isOpen=!0,document.documentElement.addEventListener("keyup",function o(t){var n=t.keyCode||t.which;27===n&&("function"==typeof e.opts.escClose&&e.opts.escClose(),e.close(e),document.documentElement.removeEventListener("keyup",o))})}):("function"==typeof e.opts.afterOpen&&e.opts.afterOpen(),e.isOpen=!0,document.documentElement.addEventListener("keyup",function a(t){var o=t.keyCode||t.which;27===o&&("function"==typeof e.opts.escClose&&e.opts.escClose(),e.close(e),document.documentElement.removeEventListener("keyup",a))})),e},i.prototype.close=function(){var e=this;if(e.isOpen)return document.documentElement.removeAttribute("style"),document.body.removeAttribute("style"),"function"==typeof e.opts.beforeClose&&e.opts.beforeClose(),s(e.modal,e.opts.animatedIn),n(e.modal,e.opts.animatedOut),r?e.modal.addEventListener(r,function t(){s(e.modal,e.opts.modalBaseClass+"-on"),"function"==typeof e.opts.afterClose&&e.opts.afterClose(),e.isOpen=!1,e.modal.removeEventListener(r,t)}):(s(e.modal,e.opts.modalBaseClass+"-on"),"function"==typeof e.opts.afterClose&&e.opts.afterClose(),e.isOpen=!1),e},i});